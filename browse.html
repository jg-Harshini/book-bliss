<!DOCTYPE html>
<html lang="en" ng-app="bookApp">
<head>
  <meta charset="UTF-8" />
  <title>Browse BookBliss</title>

  <!-- AngularJS + ngAnimate -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-animate.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      display: flex;
      background: #d8b4f8;
      color: #3c3c3c;
    }

    .sidebar {
      width: 180px;
      background-color: #9b5de5;
      padding-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      position: fixed;
      height: 100vh;
    }

    .sidebar button {
      background: none;
      border: none;
      cursor: pointer;
      color: white;
      font-size: 20px;
      text-align: center;
      white-space: nowrap;
      width: 100%;
      padding: 10px 0;
    }

    .logo {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }

    .main {
      margin-left: 180px;
      padding: 40px 25px;
      width: calc(100% - 180px);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 25px 40px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(101, 78, 190, 0.15);
    }

    .header {
      padding-bottom: 25px;
      border-bottom: 2px solid #a678f5;
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 2.2rem;
      font-weight: 700;
      color: #5b2db2;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 25px;
      align-items: center;
    }

    .filters label {
      font-weight: 600;
      color: #6a4fbf;
      min-width: 100px;
    }

    .filters select,
    .filters input[type="date"],
    .filters input[type="text"] {
      padding: 10px 14px;
      font-size: 15px;
      border-radius: 8px;
      border: 1.5px solid #c8bff7;
      min-width: 150px;
      outline-offset: 2px;
    }

    .filters select:focus,
    .filters input[type="date"]:focus,
    .filters input[type="text"]:focus {
      border-color: #7a5de8;
      box-shadow: 0 0 8px #7a5de8aa;
    }

    .filters button {
      background: #e0d3f7;
      border: none;
      padding: 0 12px;
      font-weight: 700;
      font-size: 18px;
      border-radius: 6px;
      cursor: pointer;
      color: #5b2db2;
      transition: background-color 0.25s ease;
      height: 38px;
    }

    .filters button:hover {
      background-color: #a678f5;
      color: white;
    }

    .genres {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 40px;
      justify-content: center;
    }

    .genres button {
      background-color: #ede7f6;
      border: 2px solid transparent;
      border-radius: 25px;
      padding: 10px 24px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      color: #5b2db2;
      transition: all 0.3s ease;
      user-select: none;
    }

    .genres button:hover {
      background-color: #bba4f7;
      color: #3f1c7a;
    }

    .genres .active {
      background-color: #7a5de8;
      color: white;
      border-color: #5831a8;
      box-shadow: 0 6px 20px rgba(101, 78, 190, 0.6);
      transform: scale(1.05);
    }

    .book-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 28px;
    }

    .book {
      background-color: #faf7ff;
      padding: 18px 14px 24px;
      border-radius: 18px;
      text-align: center;
      box-shadow: 0 8px 16px rgba(101, 78, 190, 0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: default;
    }

    .book:hover {
      transform: translateY(-6px);
      box-shadow: 0 14px 28px rgba(101, 78, 190, 0.3);
    }

    .book img {
      width: 100%;
      height: 230px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 14px;
      transition: transform 1s ease;
    }

    .book:hover img {
      transform: scale(1.07);
    }

    .book-title {
      font-weight: 700;
      font-size: 1.1rem;
      color: #4a2f9e;
      margin-bottom: 8px;
      min-height: 48px;
    }

    .book-date {
      font-size: 13px;
      color: #7c6dbe;
      font-style: italic;
    }

    .fade.ng-enter {
      opacity: 30;
    }

    .fade.ng-enter-active {
      opacity: 15;
      transition: opacity 2s ease-in-out;
    }

    @media (max-width: 720px) {
      .filters label { min-width: 80px; }
      .filters input[type="text"], .filters select, .filters input[type="date"] {
        min-width: 120px;
      }
      .book-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 20px;
      }
    }
  </style>
</head>

<body ng-controller="BrowseController">
  <div class="sidebar">
    <div class="logo">ðŸ“–<span>BookBliss</span></div>
    <button>Browse</button>
    <button>Community</button>
    <button>Settings</button>
    <button>About</button>
    <button>AI</button>
  </div>

  <div class="main">
    <div class="container">
      <div class="header">ðŸ“š Browse BookBliss</div>

      <div class="filters">
        <label for="dateType">Release Year:</label>
        <select id="dateType" ng-model="filterDate.type">
          <option value="before">Before</option>
          <option value="after">After</option>
        </select>

        <input type="date" ng-model="filterDate.date" />

        <label for="authorSearch">Author:</label>
        <input id="authorSearch" type="text" ng-model="search.author" placeholder="Author name" />
        <button ng-click="clearAuthor()">âœ•</button>
      </div>

      <div class="genres">
        <button 
          ng-repeat="genre in genres" 
          ng-class="{'active': selectedGenre === genre}"
          ng-click="setGenre(genre)">
          {{ genre }}
        </button>
      </div>

      <div class="book-grid">
        <book-card class="fade"
          ng-repeat="book in books | filter:filterByAuthor | filter:filterByGenre | filter:filterByDate"
          book="book">
        </book-card>
      </div>
    </div>
  </div>

  <!-- AngularJS Application Script -->
  <script>
    const app = angular.module('bookApp', ['ngAnimate']);

    // Genre Factory
    app.factory('GenreFactory', function () {
      return ["horror", "thriller", "mystery", "fantasy", "motivation"];
    });

    // Book Card Directive
    app.directive('bookCard', function () {
      return {
        restrict: 'E',
        scope: { book: '=' },
        template: `
          <div class="book">
            <img ng-src="{{ book.cover }}" alt="Cover of {{ book.title }}">
            <div class="book-title">{{ book.title }}</div>
            <div class="book-date">Updated {{ book.updated }}</div>
          </div>
        `
      };
    });

   app.controller('BrowseController', function ($scope, $http, GenreFactory) {
  $scope.books = [];
  $scope.genres = GenreFactory;
  $scope.selectedGenre = "";
  $scope.search = { author: '' };
  $scope.filterDate = { type: 'before', date: '2000-12-01' };

  $scope.setGenre = function (genre) {
    $scope.selectedGenre = ($scope.selectedGenre === genre) ? "" : genre;
  };

  $scope.clearAuthor = function () {
    $scope.search.author = "";
  };

  $scope.filterByAuthor = function (book) {
    if (!$scope.search.author) return true;
    return book.author.toLowerCase().includes($scope.search.author.toLowerCase());
  };

  $scope.filterByGenre = function (book) {
    if (!$scope.selectedGenre) return true;
    return book.genre === $scope.selectedGenre;
  };

  $scope.filterByDate = function (book) {
    if (!$scope.filterDate.date) return true;
    const bookDate = new Date(book.release);
    const filterDate = new Date($scope.filterDate.date);
    return $scope.filterDate.type === 'before'
      ? bookDate < filterDate
      : bookDate > filterDate;
  };

  // Fake API using $http.get with inline JSON (data URI)
  const booksData = [
    { title: "Catching Fire", author: "Suzanne Collins", genre: "thriller", release: "2009-09-01", updated: "today", cover: "https://books.google.co.in/books/content?id=FN5wMOZKTYMC&pg=PP1&img=1&zoom=3&hl=en&bul=1&sig=ACfU3U2JjJTabbXeNV_1WgueuGibB081gQ&w=1280" },
    { title: "A Million to One", author: "Tony Faggioli", genre: "mystery", release: "2018-02-20", updated: "yesterday", cover: "https://m.media-amazon.com/images/I/71ErnKz89ML._AC_UF1000,1000_QL80_.jpg" },
    { title: "A Tiger's Heart", author: "Linda Coggin", genre: "fantasy", release: "2015-03-15", updated: "2 days ago", cover: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1393598275i/20935190.jpg" },
    { title: "No Mountain Too High", author: "Patrick E. Moore", genre: "motivation", release: "2005-06-10", updated: "today", cover: "https://m.media-amazon.com/images/I/81O5yZjhiaL._UF1000,1000_QL80_.jpg" },
    { title: "Pieces of Light", author: "Charles Fernyhough", genre: "horror", release: "2013-05-10", updated: "yesterday", cover: "https://m.media-amazon.com/images/I/91G++DMK2+L._UF1000,1000_QL80_.jpg" }
  ];

  // Simulate async fetch
  setTimeout(() => {
    $scope.books = booksData;
    $scope.$apply(); 
  }, 500);
});

  </script>
</body>
</html>
